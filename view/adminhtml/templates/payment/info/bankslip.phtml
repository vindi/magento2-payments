<?php

/**
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Vindi
 * @package     Vindi_VP
 * @copyright   Copyright (c) Vindi
 */
// @codingStandardsIgnoreFile

/**
 * @var \Vindi\VP\Block\Info\BankSlip $block
 * @see \Magento\Payment\Block\Info
 */

/** @var \Magento\Framework\Escaper $escaper */

$specificInfo = $block->getSpecificInformation();
$title = $block->escapeHtml($block->getMethod()->getTitle());
$payment = $block->getInfo();
$mediaUrl = $this->getMediaUrl();

$bankSlipUrl = $block->getBankSlipUrl();
$bankSlipNumber = $block->getBankSlipNumber();
$hasInvoice = $payment->getOrder()->hasInvoices();
?>
<dl class="payment-method vindi-vp-content">

    <dt class="title">
        <?= $block->escapeHtml($title) ?>
    </dt>
    <dd class="content">
        <div class="vindi-bankslip bankslip">
            <?php if (!$hasInvoice && $bankSlipUrl): ?>
                <div class="bankslip-barcode-container">
                    <div class="bankslip-img-code">
                        <a href="<?= $bankSlipUrl ?>"
                           target="_blank"
                           title="<?= $block->escapeHtml(__('Bank Slip')) ?>"
                           src="<?= $bankSlipNumber ?>" class="vindi-bankslip">

                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
                                <g>
                                    <path fill="#303C42" d="M22,3h-1.5C20.2236328,3,20,3.2236328,20,3.5S20.2236328,4,20.5,4H22c0.5517578,0,1,0.4487305,1,1v1.5
                                        C23,6.7763672,23.2236328,7,23.5,7S24,6.7763672,24,6.5V5C24,3.8969727,23.1025391,3,22,3z"/>
                                    <path fill="#303C42" d="M0.5,7C0.7763672,7,1,6.7763672,1,6.5V5c0-0.5512695,0.4482422-1,1-1h1.5C3.7763672,4,4,3.7763672,4,3.5
                                        S3.7763672,3,3.5,3H2C0.8974609,3,0,3.8969727,0,5v1.5C0,6.7763672,0.2236328,7,0.5,7z"/>
                                    <path fill="#303C42" d="M23.5,17c-0.2763672,0-0.5,0.2236328-0.5,0.5V19c0,0.5512695-0.4482422,1-1,1h-1.5
                                        c-0.2763672,0-0.5,0.2236328-0.5,0.5s0.2236328,0.5,0.5,0.5H22c1.1025391,0,2-0.8969727,2-2v-1.5
                                        C24,17.2236328,23.7763672,17,23.5,17z"/>
                                    <path fill="#303C42" d="M3.5,20H2c-0.5517578,0-1-0.4487305-1-1v-1.5C1,17.2236328,0.7763672,17,0.5,17S0,17.2236328,0,17.5V19
                                        c0,1.1030273,0.8974609,2,2,2h1.5C3.7763672,21,4,20.7763672,4,20.5S3.7763672,20,3.5,20z"/>
                                    <path fill="#303C42" d="M3.5,6C3.2236328,6,3,6.2236328,3,6.5v11C3,17.7763672,3.2236328,18,3.5,18S4,17.7763672,4,17.5v-11
                                        C4,6.2236328,3.7763672,6,3.5,6z"/>
                                    <path fill="#303C42" d="M13.5,6C13.2236328,6,13,6.2236328,13,6.5v11c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-11
                                        C14,6.2236328,13.7763672,6,13.5,6z"/>
                                    <path fill="#303C42" d="M20.5,6C20.2236328,6,20,6.2236328,20,6.5v11c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-11
                                        C21,6.2236328,20.7763672,6,20.5,6z"/>
                                    <path fill="#303C42" d="M6.5,6C6.2236328,6,6,6.2236328,6,6.5v8C6,14.7763672,6.2236328,15,6.5,15S7,14.7763672,7,14.5v-8
                                        C7,6.2236328,6.7763672,6,6.5,6z"/>
                                    <path fill="#303C42" d="M8.5,6C8.2236328,6,8,6.2236328,8,6.5v8C8,14.7763672,8.2236328,15,8.5,15S9,14.7763672,9,14.5v-8
                                        C9,6.2236328,8.7763672,6,8.5,6z"/>
                                    <path fill="#303C42" d="M10.5,6C10.2236328,6,10,6.2236328,10,6.5v8c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-8
                                        C11,6.2236328,10.7763672,6,10.5,6z"/>
                                    <path fill="#303C42" d="M15.5,6C15.2236328,6,15,6.2236328,15,6.5v8c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-8
                                        C16,6.2236328,15.7763672,6,15.5,6z"/>
                                    <path fill="#303C42" d="M18.5,6C18.2236328,6,18,6.2236328,18,6.5v8c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-8
                                        C19,6.2236328,18.7763672,6,18.5,6z"/>
                                    <path fill="#303C42" d="M18.5,16c-0.2763672,0-0.5,0.2236328-0.5,0.5v1c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5
                                        v-1C19,16.2236328,18.7763672,16,18.5,16z"/>
                                    <path fill="#303C42" d="M15.5,16c-0.2763672,0-0.5,0.2236328-0.5,0.5v1c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5
                                        v-1C16,16.2236328,15.7763672,16,15.5,16z"/>
                                    <path fill="#303C42" d="M10.5,16c-0.2763672,0-0.5,0.2236328-0.5,0.5v1c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5
                                        v-1C11,16.2236328,10.7763672,16,10.5,16z"/>
                                    <path fill="#303C42" d="M8.5,16C8.2236328,16,8,16.2236328,8,16.5v1C8,17.7763672,8.2236328,18,8.5,18S9,17.7763672,9,17.5v-1
                                        C9,16.2236328,8.7763672,16,8.5,16z"/>
                                    <path fill="#303C42" d="M6.5,16C6.2236328,16,6,16.2236328,6,16.5v1C6,17.7763672,6.2236328,18,6.5,18S7,17.7763672,7,17.5v-1
                                        C7,16.2236328,6.7763672,16,6.5,16z"/>
                                    <path fill="#D32E2E" d="M23.5,11h-23C0.2236328,11,0,11.2236328,0,11.5S0.2236328,12,0.5,12h23c0.2763672,0,0.5-0.2236328,0.5-0.5
                                        S23.7763672,11,23.5,11z"/>
                                    <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="-0.7076151" y1="6.0743418" x2="24.7076149" y2="17.9256592">
                                        <stop  offset="0" style="stop-color:#FFFFFF;stop-opacity:0.2"/>
                                        <stop  offset="1" style="stop-color:#FFFFFF;stop-opacity:0"/>
                                    </linearGradient>
                                    <path fill="url(#SVGID_1_)" d="M6.5,16C6.2236328,16,6,16.2236328,6,16.5v1C6,17.7763672,6.2236328,18,6.5,18S7,17.7763672,7,17.5
                                        v-1C7,16.2236328,6.7763672,16,6.5,16z M8.5,16C8.2236328,16,8,16.2236328,8,16.5v1C8,17.7763672,8.2236328,18,8.5,18
                                        S9,17.7763672,9,17.5v-1C9,16.2236328,8.7763672,16,8.5,16z M10.5,16c-0.2763672,0-0.5,0.2236328-0.5,0.5v1
                                        c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-1C11,16.2236328,10.7763672,16,10.5,16z M3.5,20H2
                                        c-0.5517578,0-1-0.4487305-1-1v-1.5C1,17.2236328,0.7763672,17,0.5,17S0,17.2236328,0,17.5V19c0,1.1030273,0.8974609,2,2,2h1.5
                                        C3.7763672,21,4,20.7763672,4,20.5S3.7763672,20,3.5,20z M0.5,7C0.7763672,7,1,6.7763672,1,6.5V5c0-0.5512695,0.4482422-1,1-1h1.5
                                        C3.7763672,4,4,3.7763672,4,3.5S3.7763672,3,3.5,3H2C0.8974609,3,0,3.8969727,0,5v1.5C0,6.7763672,0.2236328,7,0.5,7z M23.5,11H21
                                        V6.5C21,6.2236328,20.7763672,6,20.5,6S20,6.2236328,20,6.5V11h-1V6.5C19,6.2236328,18.7763672,6,18.5,6S18,6.2236328,18,6.5V11h-2
                                        V6.5C16,6.2236328,15.7763672,6,15.5,6S15,6.2236328,15,6.5V11h-1V6.5C14,6.2236328,13.7763672,6,13.5,6S13,6.2236328,13,6.5V11h-2
                                        V6.5C11,6.2236328,10.7763672,6,10.5,6S10,6.2236328,10,6.5V11H9V6.5C9,6.2236328,8.7763672,6,8.5,6S8,6.2236328,8,6.5V11H7V6.5
                                        C7,6.2236328,6.7763672,6,6.5,6S6,6.2236328,6,6.5V11H4V6.5C4,6.2236328,3.7763672,6,3.5,6S3,6.2236328,3,6.5V11H0.5
                                        C0.2236328,11,0,11.2236328,0,11.5S0.2236328,12,0.5,12H3v5.5C3,17.7763672,3.2236328,18,3.5,18S4,17.7763672,4,17.5V12h2v2.5
                                        C6,14.7763672,6.2236328,15,6.5,15S7,14.7763672,7,14.5V12h1v2.5C8,14.7763672,8.2236328,15,8.5,15S9,14.7763672,9,14.5V12h1v2.5
                                        c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5V12h2v5.5c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5V12h1
                                        v2.5c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5V12h2v2.5c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5
                                        V12h1v5.5c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5V12h2.5c0.2763672,0,0.5-0.2236328,0.5-0.5
                                        S23.7763672,11,23.5,11z M22,3h-1.5C20.2236328,3,20,3.2236328,20,3.5S20.2236328,4,20.5,4H22c0.5517578,0,1,0.4487305,1,1v1.5
                                        C23,6.7763672,23.2236328,7,23.5,7S24,6.7763672,24,6.5V5C24,3.8969727,23.1025391,3,22,3z M15.5,16
                                        c-0.2763672,0-0.5,0.2236328-0.5,0.5v1c0,0.2763672,0.2236328,0.5,0.5,0.5s0.5-0.2236328,0.5-0.5v-1
                                        C16,16.2236328,15.7763672,16,15.5,16z M23.5,17c-0.2763672,0-0.5,0.2236328-0.5,0.5V19c0,0.5512695-0.4482422,1-1,1h-1.5
                                        c-0.2763672,0-0.5,0.2236328-0.5,0.5s0.2236328,0.5,0.5,0.5H22c1.1025391,0,2-0.8969727,2-2v-1.5
                                        C24,17.2236328,23.7763672,17,23.5,17z M18.5,16c-0.2763672,0-0.5,0.2236328-0.5,0.5v1c0,0.2763672,0.2236328,0.5,0.5,0.5
                                        s0.5-0.2236328,0.5-0.5v-1C19,16.2236328,18.7763672,16,18.5,16z"/>
                                </g>

                                </svg>
                            <?= $block->escapeHtml(__('Download Bank Slip')) ?>

                        </a>
                    </div>
                    <div class="bankslip-number-container">
                        <div class="bankslip-number"><?= $bankSlipNumber ?></div>
                    </div>
                </div>
            <?php endif; ?>
        </div>
    </dd>

    <?php if ($specificInfo):?>
        <dd>
            <table class="data table admin__table-primary vindi-vp-data-table">
                <?php foreach ($specificInfo as $label => $value):?>
                    <tr>
                        <th scope="row"><?= $block->escapeHtml($label) ?></th>
                        <td>
                            <?= /* @noEscape */ nl2br($block->escapeHtml(
                                implode("\n", $block->getValueAsArray($value, false)), ['a'])
                            ) ?>
                        </td>
                    </tr>
                <?php endforeach; ?>
            </table>
        </dd>
    <?php endif;?>
</dl>
<?= $block->getChildHtml() ?>

<style>
    .vindi-vp-content {
        padding: 10px 0;
    }

    .vindi-vp-content .title {
        font-size: 2rem;
        margin-bottom: 10px;
    }

    .vindi-vp-content dd {
        margin-top:15px;
        margin-inline-start: 5px;
    }

    .bankslip-number-container {
        margin-top:10px;
    }

    .bankslip-img-code {
        max-width: 180px;
    }

    .bankslip-number  {
        overflow-wrap: break-word;
    }
</style>
